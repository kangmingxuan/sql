# 数值函数 #

SQL 数值函数主要用于数值操作和/或数学运算，下表是列出了 SQL 中所有的数值函数：

<table>
   <tr>
      <td>名称</td>
      <td>描述</td>
   </tr>
   <tr>
      <td>ABS()</td>
      <td>返回数值表达式的绝对值。</td>
   </tr>
   <tr>
      <td>ACOS()</td>
      <td>返回数值表达式的反余弦值，如果参数不在 -1 至 1 范围内，则返回 NULL。</td>
   </tr>
   <tr>
      <td>ASIN()</td>
      <td>返回数值表达式的反正弦值，如果参数不在 -1 至 1 范围内，则返回 NULL。</td>
   </tr>
   <tr>
      <td>ATAN()</td>
      <td>返回数值表达式的反正切值。</td>
   </tr>
   <tr>
      <td>ATAN2()</td>
      <td>返回作为参数的两个变量的反正切值。</td>
   </tr>
   <tr>
      <td>BIT_AND()</td>
      <td>返回表达式中所有位按位与的结果。</td>
   </tr>
   <tr>
      <td>BIT_COUNT()</td>
      <td>返回参数的位中 1 的个数。</td>
   </tr>
   <tr>
      <td>BIT_OR()</td>
      <td>返回表达式中所有位按位或的结果。</td>
   </tr>
   <tr>
      <td>CEIL()</td>
      <td>返回不小于参数的最小整数。</td>
   </tr>
   <tr>
      <td>CEILING()</td>
      <td>返回不小于参数的最小整数。</td>
   </tr>
   <tr>
      <td>CONV()</td>
      <td>转换数值的进制。</td>
   </tr>
   <tr>
      <td>COS()</td>
      <td>返回参数的余弦值。参数应以弧度表示。</td>
   </tr>
   <tr>
      <td>COT()</td>
      <td>返回参数的余切值。</td>
   </tr>
   <tr>
      <td>DEGREES()</td>
      <td>将弧度转换为角度。</td>
   </tr>
   <tr>
      <td>EXP()</td>
      <td>返回自然对数底（e）的幂。</td>
   </tr>
   <tr>
      <td>FLOOR()</td>
      <td>返回不大于参数的最大整数。</td>
   </tr>
   <tr>
      <td>FORMAT()</td>
      <td>格式化参数，将其按照参数进行小数位的截断。</td>
   </tr>
   <tr>
      <td>GREATEST()</td>
      <td>返回输入参数中的最大值。</td>
   </tr>
   <tr>
      <td>INTERVAL()</td>
      <td>返回第一个参数在后面参数列中的位置。</td>
   </tr>
   <tr>
      <td>LEAST()</td>
      <td>返回参数列中的最小值。</td>
   </tr>
   <tr>
      <td>LOG()</td>
      <td>返回参数的自然对数。</td>
   </tr>
   <tr>
      <td>LOG10()</td>
      <td>返回参数以 10 为底的对数。</td>
   </tr>
   <tr>
      <td>MOD()</td>
      <td>返回第一个参数除以第二参数的余数。</td>
   </tr>
   <tr>
      <td>OCT()</td>
      <td>返回参数的八进制字符串表示。如果该值为 NULL，则函数返回 NULL。</td>
   </tr>
   <tr>
      <td>PI()</td>
      <td>返回 pi 的值。</td>
   </tr>
   <tr>
      <td>POW()</td>
      <td>返回第一参数的幂，幂的次数为第二个参数。</td>
   </tr>
   <tr>
      <td>POWER()</td>
      <td>返回第一参数的幂，幂的次数为第二个参数。</td>
   </tr>
   <tr>
      <td>RADIANS()</td>
      <td>将参数转换有角度转换为弧度。</td>
   </tr>
   <tr>
      <td>ROUND()</td>
      <td>对参数进行四舍五入，可以控制输入的小数位数。</td>
   </tr>
   <tr>
      <td>SIN()</td>
      <td>返回正弦值</td>
   </tr>
   <tr>
      <td>SQRT()</td>
      <td>返回非负平方根。</td>
   </tr>
   <tr>
      <td>STD()</td>
      <td>返回参数表达式的标准差。</td>
   </tr>
   <tr>
      <td>STDDEV()</td>
      <td>返回参数表达式的标准差。</td>
   </tr>
   <tr>
      <td>TAN()</td>
      <td>返回正切值。</td>
   </tr>
   <tr>
      <td>TRUNCATE()</td>
      <td>将第一个参数按照第二个参数进行截断，如果第二个参数为 0，则结果中没有小数点和小数。</td>
   </tr>
</table>

## ABS(X) ##

ABS(X) 函数返回 X 的绝对值。考虑下面的例子：

	SQL> SELECT ABS(2);
	+---------------------------------------------------------+
	| ABS(2)                                                  |
	+---------------------------------------------------------+
	| 2                                                       |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)
	
	SQL> SELECT ABS(-2);
	+---------------------------------------------------------+
	| ABS(2)                                                  |
	+---------------------------------------------------------+
	| 2                                                       |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## ACOS(X) ##

该函数返回 X 的反余弦值。X必须在 -1 至 1 之间，否则函数将会返回 NULL。考虑下面的例子：

	SQL> SELECT ACOS(1);
	+---------------------------------------------------------+
	| ACOS(1)                                                 |
	+---------------------------------------------------------+
	| 0.000000                                                |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## ASIN(X) ##

ASIN(X) 函数返回 X 的反正弦值。X必须在 -1 至 1 之间，否则函数将会返回 NULL。考虑下面的例子：

	SQL> SELECT ASIN(1);
	+---------------------------------------------------------+
	| ASIN(1)                                                 |
	+---------------------------------------------------------+
	| 1.5707963267949                                         |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## ATAN(X) ##

该函数返回 X 的反正切值：

	SQL> SELECT ATAN(1);
	+---------------------------------------------------------+
	| ATAN(1)                                                 |
	+---------------------------------------------------------+
	| 0.78539816339745                                        |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## ATAN2(Y,X) ##

该函数根据其两个参数的 X 和 Y 返回一个反正切值，有些类似于对 Y/X 求反正切，只是两个参数的符号都被用于确定结果所在的象限：

	SQL> SELECT ATAN2(3,6);
	+---------------------------------------------------------+
	| ATAN2(3,6)                                              |
	+---------------------------------------------------------+
	| 0.46364760900081                                        |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## BIT_AND(expression) ##

BIT_AND 函数返回 expression 中所有位按位进行 AND（与）运算的结果。其基本规则是，如果两个为相同，则 AND 运算返回 1，其余情况 AND 运算返回 0。该函数返回 64 位整数值。如果无法进行匹配的话，则返回 18446744073709551615。下面的示例在按照汽车 MAKER 分组的 PRICE 字段上进行了 BIT_AND 运算：

	SQL> SELECT 
	          MAKER, BIT_AND(PRICE) BITS
	          FROM CARS GROUP BY MAKER
	+---------------------------------------------------------+
	|MAKER           BITS                                     |
	+---------------------------------------------------------+
	|CHRYSLER        512                                      |
	|FORD            12488                                    |
	|HONDA           2144                                     |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## BIT_COUNT(numeric_value) ##

BIT_COUNT 函数返回 numeric_value 所有激活的位（即为 1 的位）的个数。下面的示例展示了如何使用 BIT_COUNT 函数来返回一些数中激活位的个数：

	SQL> SELECT
	          BIT_COUNT(2) AS TWO,
	          BIT_COUNT(4) AS FOUR,
	          BIT_COUNT(7) AS SEVEN
	+-----+------+-------+
	| TWO | FOUR | SEVEN |
	+-----+------+-------+
	|   1 |    1 |     3 |
	+-----+------+-------+
	1 row in set (0.00 sec)

## BIT_OR(expression) ##

BIT_OR() 函数返回 expression 中所有位按位进行 OR（或）运算的结果。其基本规则是如果所有的对应的位都为 0 的话，则返回 0，否则返回 1。该函数返回 64 位整数值。如果无匹配记录的话，则返回 0。下面的示例在按照汽车 MAKER 分组的 PRICE 字段上进行了 BIT_OR 运算：

	SQL> SELECT 
	          MAKER, BIT_OR(PRICE) BITS
	          FROM CARS GROUP BY MAKER
	+---------------------------------------------------------+
	|MAKER           BITS                                     |
	+---------------------------------------------------------+
	|CHRYSLER        62293                                    |
	|FORD            16127                                    |
	|HONDA           32766                                    |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## CEIL(X)，CEILING(X) ##

这两个函数返回不小于 X 的最小整数。考虑以下示例：

	SQL> SELECT CEILING(3.46);
	+---------------------------------------------------------+
	| CEILING(3.46)                                           |
	+---------------------------------------------------------+
	| 4                                                       |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)
	
	SQL> SELECT CEIL(-6.43);
	+---------------------------------------------------------+
	| CEIL(-6.43)                                             |
	+---------------------------------------------------------+
	| -6                                                      |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## CONV(N,from_base,to_base) ##

CONV() 函数用于对数值进行进制转换。该函数返回数 N 由 from_base 进制转换为 to_base 进制之后的字符串表示。进制值的最小值为 2，最大值为 36。如果任何一个参数为 NULL，该函数就会返回 NULL。考虑下面的示例，将 5 从 16 进制转换为 2 进制。

	SQL> SELECT CONV(5,16,2);
	+---------------------------------------------------------+
	| CONV(5,16,2)                                            |
	+---------------------------------------------------------+
	| 101                                                     |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## COS(X) ##

该函数返回 X 的余弦值，X 以弧度来表示：

	SQL>SELECT COS(90);
	+---------------------------------------------------------+
	| COS(90)                                                 |
	+---------------------------------------------------------+
	| -0.44807361612917                                       |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## COT(X) ##

该函数返回 X 的余切值，请看下面的示例：

	SQL>SELECT COT(1);
	+---------------------------------------------------------+
	| COT(1)                                                  |
	+---------------------------------------------------------+
	| 0.64209261593433                                        |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## DEGREES(X) ##

该函数将值 X 从弧度转换为角度：

	SQL>SELECT DEGREES(PI());
	+---------------------------------------------------------+
	| DEGREES(PI())                                           |
	+---------------------------------------------------------+
	| 180.000000                                              |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## EXP(X) ##

该函数返回 e（自然对数的底）的 X 次幂：

	SQL>SELECT EXP(3);
	+---------------------------------------------------------+
	| EXP(3)                                                  |
	+---------------------------------------------------------+
	| 20.085537                                               |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## FLOOR(X) ##

该函数返回不大于 X 的最大整数：

	SQL>SELECT FLOOR(7.55);
	+---------------------------------------------------------+
	| FLOOR(7.55)                                             |
	+---------------------------------------------------------+
	| 7                                                       |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## FORMAT(X,D) ##

FORMAT() 函数用于将数值 X 并截断至 D 个小数位，并格式化为 ###,###,###.## 的形式。下面的示例展示了 FORMAT() 函数的用法和输出：

	SQL>SELECT FORMAT(423423234.65434453,2);
	+---------------------------------------------------------+
	| FORMAT(423423234.65434453,2)                            |
	+---------------------------------------------------------+
	| 423,423,234.65                                          |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## GREATEST(n1,n2,n3,..........) ##

GREATEST() 返回输入参数中所有数的最大值。下面的例子使用 GREATEST() 函数来返回一组数值中的最大值：

	SQL>SELECT GREATEST(3,5,1,8,33,99,34,55,67,43);
	+---------------------------------------------------------+
	| GREATEST(3,5,1,8,33,99,34,55,67,43)                     |
	+---------------------------------------------------------+
	| 99                                                      |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## INTERVAL(N,N1,N2,N3,..........) ##

INTERVAL() 将 N 与其余所有的数值作比较。如果 N < N1，则该函数返回 0；否则如果 N < N2，则返回 1；否则如果 N < N3，则返回 2，以此类推。如果 N 为 NULL，则该函数返回 1。值列必须为 N1 < N2 < N3 的形式，以保证函数正常工作。下面的代码是一个有关 INTERVAL() 如何工作简单示例：

	SQL>SELECT INTERVAL(6,1,2,3,4,5,6,7,8,9,10);
	+---------------------------------------------------------+
	| INTERVAL(6,1,2,3,4,5,6,7,8,9,10)                        |
	+---------------------------------------------------------+
	| 6                                                       |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## LEAST(N1,N2,N3,N4,......) ##

LEAST() 函数与 GREATEST() 函数刚好相反，其目的为返回值列（N1、N2、N3……）中的最小值。下例展示了 LEAST() 函数的正确用法和函数输出：

	SQL>SELECT LEAST(3,5,1,8,33,99,34,55,67,43);
	+---------------------------------------------------------+
	| LEAST(3,5,1,8,33,99,34,55,67,43)                        |
	+---------------------------------------------------------+
	| 1                                                       |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## LOG(X)，LOG(B,X) ##

单参数版的函数将会返回 X 的自然对数。当以两个参数调用的时候，该函数返回 X 以 B 为底的对数。请看下面的示例：

	SQL>SELECT LOG(45);
	+---------------------------------------------------------+
	| LOG(45)                                                 |
	+---------------------------------------------------------+
	| 3.806662                                                |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)
	
	SQL>SELECT LOG(2,65536);
	+---------------------------------------------------------+
	| LOG(2,65536)                                            |
	+---------------------------------------------------------+
	| 16.000000                                               |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## LOG10(X) ##

该函数返回 X 以 10 为底的对数：

	SQL>SELECT LOG10(100);
	+---------------------------------------------------------+
	| LOG10(100)                                              |
	+---------------------------------------------------------+
	| 2.000000                                                |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## MOD(N,M) ##

该函数返回 N 除以 M 的余数。请看下面的例子：

	SQL>SELECT MOD(29,3);
	+---------------------------------------------------------+
	| MOD(29,3)                                               |
	+---------------------------------------------------------+
	| 2                                                       |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## OCT(N) ##

OCT() 函数返回 N 的八进制字符串表示。该函数等价于 CONV(N,10,8)。

	SQL>SELECT OCT(12);
	+---------------------------------------------------------+
	| OCT(12)                                                 |
	+---------------------------------------------------------+
	| 14                                                      |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## PI() ##

该函数只是简单地返回 pi 的值。SQL 内部存储了 pi 的双精度值。

	SQL>SELECT PI();
	+---------------------------------------------------------+
	| PI()                                                    |
	+---------------------------------------------------------+
	| 3.141593                                                |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## POW(X,Y)，POWER(X,Y) ##

这两个函数返回 X 的 Y 次幂。

	SQL> SELECT POWER(3,3);
	+---------------------------------------------------------+
	| POWER(3,3)                                              |
	+---------------------------------------------------------+
	| 27                                                      |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## RADIANS(X) ##

该函数将 X 由角度转换为弧度。

	SQL>SELECT RADIANS(90);
	+---------------------------------------------------------+
	| RADIANS(90)                                             |
	+---------------------------------------------------------+
	|1.570796                                                 |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## ROUND(X)，ROUND(X,D) ##

该函数返回 X 四舍五入后的整数值。如果指定了第二个参数 D，则函数返回 X 四舍五入到 D 位小数的结果。D必须为正数，否则结果中将不会有小数部分。请看以下示例：

	SQL>SELECT ROUND(5.693893);
	+---------------------------------------------------------+
	| ROUND(5.693893)                                         |
	+---------------------------------------------------------+
	| 6                                                       |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)
	
	SQL>SELECT ROUND(5.693893,2);
	+---------------------------------------------------------+
	| ROUND(5.693893,2)                                       |
	+---------------------------------------------------------+
	| 5.69                                                    |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## SIGN(X) ##

该函数返回 X 的符号，负数返回 -1，整数返回 1，0 值返回 0。

	SQL>SELECT SIGN(-4.65);
	+---------------------------------------------------------+
	| SIGN(-4.65)                                             |
	+---------------------------------------------------------+
	| -1                                                      |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)
	
	SQL>SELECT SIGN(0);
	+---------------------------------------------------------+
	| SIGN(0)                                                 |
	+---------------------------------------------------------+
	| 0                                                       |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)
	
	SQL>SELECT SIGN(4.65);
	+---------------------------------------------------------+
	| SIGN(4.65)                                              |
	+---------------------------------------------------------+
	| 1                                                       |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## SIN(X) ##

该函数返回 X 的正弦值。请看以下示例：

	SQL>SELECT SIN(90);
	+---------------------------------------------------------+
	| SIN(90)                                                 |
	+---------------------------------------------------------+
	| 0.893997                                                |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## SQRT(X) ##

该函数返回 X 的正平方根，请看一下示例：

	SQL>SELECT SQRT(49);
	+---------------------------------------------------------+
	| SQRT(49)                                                |
	+---------------------------------------------------------+
	| 7                                                       |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## STD(expression)，STDDEV(expression) ##

STD() 函数用于返回 expression 的标准差。该函数等价于对 VARIANCE() 函数的结果取平方根。下面的例子计算了 CAR 表中 PRICE 的标准差：

	SQL>SELECT STD(PRICE) STD_DEVIATION FROM CARS;
	+---------------------------------------------------------+
	| STD_DEVIATION                                           |
	+---------------------------------------------------------+
	| 7650.2146                                               |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)

## TAN(X) ##

该函数返回 X 的正切值，X 以弧度表示：

## TRUNCATE(X,D) ##

该函数用于将 X 阶段为 D 个小数位的表示。如果 D 为 0 的话，小数点就会被去掉。如果 D 为负数的话，那么整数部分就被截断为 D 位。请看以下示例：

	SQL>SELECT TRUNCATE(7.536432,2);
	+---------------------------------------------------------+
	| TRUNCATE(7.536432,2)                                    |
	+---------------------------------------------------------+
	| 7.53                                                    |
	+---------------------------------------------------------+
	1 row in set (0.00 sec)
